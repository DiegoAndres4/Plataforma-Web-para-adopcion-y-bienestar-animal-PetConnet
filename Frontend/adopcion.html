<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PetConnect - Adopci√≥n</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Tus estilos -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/adopcion.css">
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg site-navbar bg-white">
    <div class="container">
      <a class="navbar-brand logo" href="index.html">
        <img src="img/logo.png" alt="PetConnect">
      </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
          <span class="navbar-toggler-icon"></span>
        </button>
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="adopcion.html">Adopci√≥n</a></li>
          <li class="nav-item"><a class="nav-link" href="denuncias.html">Denuncias</a></li>
          <li class="nav-item"><a class="nav-link" href="acerca.html">Acerca de</a></li>
          <li class="nav-item"><a class="nav-link" href="Contactenos.html">Contacto</a></li>
          <li class="nav-item"><a class="nav-link btn login-btn text-white ms-lg-3" href="login.html">Login</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="adopcion-container">

    <div class="adopcion-header">
      <h1>Encuentra a tu nuevo mejor amigo</h1>
      <p>En PetConnect, creemos que cada mascota merece un hogar amoroso. Explora nuestras mascotas disponibles.</p>
    </div>

    <!-- BOT√ìN PUBLICAR -->
    <div class="adopcion-actions">
      <a href="login.html" class="btn-publicar">+ Publicar Mascota en Adopci√≥n</a>
    </div>

    <!-- BUSCADOR -->
    <div class="adopcion-search">
      <input id="search" type="text" class="search-input" placeholder="üîç Busca por nombre, raza o ubicaci√≥n">
    </div>

    <!-- FILTROS (a√∫n no funcionales) -->
    <div class="adopcion-filters">
      <button class="filter-btn">Edad</button>
      <button class="filter-btn">Tama√±o</button>
      <button class="filter-btn">Ubicaci√≥n</button>
      <button class="filter-btn">Especie</button>
    </div>

    <!-- GRID DIN√ÅMICO -->
    <div class="adopcion-grid" id="mascotas-container"></div>

    <!-- PAGINACI√ìN DIN√ÅMICA -->
    <div class="adopcion-pagination" id="pagination"></div>

  </div>

  <!-- FOOTER -->
  <footer>
    <p>&copy; 2025 PetConnect. Todos los derechos reservados.</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- SCRIPT DIN√ÅMICO -->
  <script>
    let paginaActual = 0;
    let size = 6; // cantidad por p√°gina

    // Cargar mascotas desde API
    async function cargarMascotas() {
        const q = document.getElementById("search").value || "";

        const url = http://localhost:8080/api/adopciones?page=${paginaActual}&size=${size}&q=${q};
        const response = await fetch(url);
        const data = await response.json();

        mostrarMascotas(data.content);
        mostrarPaginacion(data.totalPages);
    }

    // Mostrar tarjetas
    function mostrarMascotas(lista) {
        const contenedor = document.getElementById("mascotas-container");
        contenedor.innerHTML = "";

        lista.forEach(m => {
            contenedor.innerHTML += `
                <div class="pet-card">
                    <img src="${m.fotoUrl}" alt="${m.nombre}">
                    <div class="pet-info">
                        <h5>${m.nombre}</h5>
                        <p>${m.descripcion}<br>${m.especie} ‚Ä¢ ${m.genero} ‚Ä¢ ${m.edadCategoria}</p>
                        <a href="adoptar.html?id=${m.id}" class="btn-adoptar">Adoptar</a>
                    </div>
                </div>
            `;
        });
    }

    // Crear botones de paginaci√≥n
    function mostrarPaginacion(totalPaginas) {
        const pagDiv = document.getElementById("pagination");
        pagDiv.innerHTML = "";

        for (let i = 0; i < totalPaginas; i++) {
            pagDiv.innerHTML += `
                <button 
                    class="pagination-btn ${i === paginaActual ? 'active' : ''}"
                    onclick="cambiarPagina(${i})"
                >
                ${i + 1}
                </button>
            `;
        }
    }

    function cambiarPagina(num) {
        paginaActual = num;
        cargarMascotas();
    }

    // Activar b√∫squeda
    document.getElementById("search").addEventListener("keyup", () => {
        paginaActual = 0;
        cargarMascotas();
    });

    // Cargar al iniciar
    cargarMascotas();
  </script>

</body>
</html>